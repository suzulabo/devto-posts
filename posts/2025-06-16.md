---
title: iOS PWAでnavigateが動作しない時がある2
published: true
---

###### 2025-06-14

---

- 毎回 openWindow すると、safari の develop menu の app に複数の window が表示されるようになる
- clients.matchAll でも openWindow した分、溜まっていく(リークになっていそう)
- https://meta.discourse.org/t/web-push-notifications-on-ios-dont-route-user-to-any-url-on-click/255975/2?utm_source=chatgpt.com
- 基本的には使い回す
- client.focus を試して、エラーになれば openWindow するようにする
  - コードを書き直してから再現しなかったが、focus がエラーになる現象は見たことがある
- PWA がタスキルされた状態でも matchAll で 1 つは取得できる
- ただし取得できないこともあったので、1 秒ほどリトライして駄目なら openWindow するようにする
