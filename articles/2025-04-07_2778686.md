---
title: sveltekit check error
id: 2778686
---

###### 2025-04-07

---

```
kenji writer % pnpm run check

> @announcing/writer@ check /Users/kenji/home/project/announcing/announcing.202312/packages/writer
> svelte-kit sync && svelte-check --tsconfig ./tsconfig.json


====================================
Loading svelte-check in workspace: /Users/kenji/home/project/announcing/announcing.202312/packages/writer
Getting Svelte diagnostics...

/Users/kenji/home/project/announcing/announcing.202312/packages/writer/vite.config.ts:5:13
Error: No overload matches this call.
  The last overload gave the following error.
    Type 'Promise<Plugin<any>[]>' is not assignable to type 'PluginOption'.
      Type 'Promise<Plugin<any>[]>' is not assignable to type 'Promise<Plugin<any> | FalsyPlugin | PluginOption[]>'.
        Type 'Plugin<any>[]' is not assignable to type 'Plugin<any> | FalsyPlugin | PluginOption[]'.
          Type 'Plugin<any>[]' is not assignable to type 'PluginOption[]'.
            Type 'Plugin<any>' is not assignable to type 'PluginOption'.
              Type 'import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/vite@6.2.2_@types+node@22.13.10_jiti@2.4.2_sass@1.85.1_terser@5.36.0_tsx@4.19.3/node_modules/vite/dist/node/index").Plugin<any>' is not assignable to type 'import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/vite@6.2.3_@types+node@22.13.10_jiti@2.4.2_sass@1.85.1_terser@5.36.0_tsx@4.19.3/node_modules/vite/dist/node/index").Plugin<any>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
                Types of property 'hotUpdate' are incompatible.
                  Type 'import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/rollup@4.39.0/node_modules/rollup/dist/rollup").ObjectHook<(this: HotUpdatePluginContext, options: import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/vite@6.2.2_@types+node@22.13.10_jiti@2.4.2_sass@1.85.1...' is not assignable to type 'import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/rollup@4.39.0/node_modules/rollup/dist/rollup").ObjectHook<(this: HotUpdatePluginContext, options: import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/vite@6.2.3_@types+node@22.13.10_jiti@2.4.2_sass@1.85.1...'.
                    Type '(this: HotUpdatePluginContext, options: HotUpdateOptions) => void | EnvironmentModuleNode[] | Promise<void | EnvironmentModuleNode[]>' is not assignable to type 'ObjectHook<(this: HotUpdatePluginContext, options: HotUpdateOptions) => void | EnvironmentModuleNode[] | Promise<void | EnvironmentModuleNode[]>>'.
                      Type '(this: HotUpdatePluginContext, options: import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/vite@6.2.2_@types+node@22.13.10_jiti@2.4.2_sass@1.85.1_terser@5.36.0_tsx@4.19.3/node_modules/vite/dist/node/index").HotUpdateOptions) => void | ... 1 more ... | Promise<...>' is not assignable to type '(this: HotUpdatePluginContext, options: import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/vite@6.2.3_@types+node@22.13.10_jiti@2.4.2_sass@1.85.1_terser@5.36.0_tsx@4.19.3/node_modules/vite/dist/node/index").HotUpdateOptions) => void | ... 1 more ... | Promise<...>'.
                        The 'this' types of each signature are incompatible.
                          Type 'HotUpdatePluginContext' is not assignable to type 'HotUpdatePluginContext'. Two different types with this name exist, but they are unrelated.
                            The types of 'environment.pluginContainer.environment' are incompatible between these types.
                              Type 'import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/vite@6.2.3_@types+node@22.13.10_jiti@2.4.2_sass@1.85.1_terser@5.36.0_tsx@4.19.3/node_modules/vite/dist/node/index").Environment' is not assignable to type 'import("/Users/kenji/home/project/announcing/announcing.202312/node_modules/.pnpm/vite@6.2.2_@types+node@22.13.10_jiti@2.4.2_sass@1.85.1_terser@5.36.0_tsx@4.19.3/node_modules/vite/dist/node/index").Environment'.
                                Type 'DevEnvironment' is not assignable to type 'Environment'.
export default defineConfig({
  plugins: [sveltekit()],
  build:
```

- vite@6.2.2までなら出ない
- しばらくviteのバージョンアップを止めていたが、しばらくしたら直っていた
- typeのミスマッチのようなので深掘りはせず
