---
title: Cannot find module 'cloudflare:workers'
id: 2782165
---

###### 2025-04-30

---

```typescript
import { WorkflowEntrypoint, WorkflowStep, type WorkflowEvent } from 'cloudflare:workers';

class WorkflowStepLocal<T> extends WorkflowStep {
  override do(name: string, callback: () => Promise<T>): Promise<T>;
  override do(name: string, config: WorkflowStepConfig, callback: () => Promise<T>): Promise<T>;
  override async do(
    _name: string,
    configOrCallback: WorkflowStepConfig | (() => Promise<T>),
    maybeCallback?: () => Promise<T>,
  ): Promise<T> {
    if (maybeCallback) {
      return maybeCallback();
    }
    if (typeof configOrCallback === 'function') {
      return configOrCallback();
    }

    throw new Error('No callback');
  }
}
```

とやると、ローカル実行時に`Cannot find module 'cloudflare:workers'`となる

- 必要なクラスの[プラグイン](https://github.com/announcing-app/announcing/blob/6d987fce0ce4ebb8058f0fc88c7d9f84c0148efe/packages/cloudflare-support/src/vitePlugin.ts)を作って対応
- [vite.config.ts](https://github.com/announcing-app/announcing/blob/6d987fce0ce4ebb8058f0fc88c7d9f84c0148efe/packages/writer/vite.config.ts#L22)に設定
